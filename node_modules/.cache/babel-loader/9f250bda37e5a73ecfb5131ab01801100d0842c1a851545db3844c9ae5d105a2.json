{"ast":null,"code":"import _toConsumableArray from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./Components/Styles/App.scss\";import Comment from\"./Components/Comment\";import AddComment from\"./Components/AddComment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],updateComments=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteModalState=_useState4[0],setDeleteModalState=_useState4[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"./data/data.json\");case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;updateComments(data.comments);case 7:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();useEffect(function(){localStorage.getItem(\"comments\")!==null?updateComments(JSON.parse(localStorage.getItem(\"comments\"))):getData();},[]);useEffect(function(){localStorage.setItem(\"comments\",JSON.stringify(comments));deleteModalState?document.body.classList.add(\"overflow--hidden\"):document.body.classList.remove(\"overflow--hidden\");},[comments,deleteModalState]);// update score\nvar updateScore=function updateScore(score,id,type){var updatedComments=_toConsumableArray(comments);if(type===\"comment\"){updatedComments.forEach(function(data){if(data.id===id){data.score=score;}});}else if(type===\"reply\"){updatedComments.forEach(function(comment){comment.replies.forEach(function(data){if(data.id===id){data.score=score;}});});}updateComments(updatedComments);};// add comments\nvar addComments=function addComments(newComment){var updatedComments=[].concat(_toConsumableArray(comments),[newComment]);updateComments(updatedComments);};// add replies\nvar updateReplies=function updateReplies(replies,id){var updatedComments=_toConsumableArray(comments);updatedComments.forEach(function(data){if(data.id===id){data.replies=_toConsumableArray(replies);}});updateComments(updatedComments);};// edit comment\nvar editComment=function editComment(content,id,type){var updatedComments=_toConsumableArray(comments);if(type===\"comment\"){updatedComments.forEach(function(data){if(data.id===id){data.content=content;}});}else if(type===\"reply\"){updatedComments.forEach(function(comment){comment.replies.forEach(function(data){if(data.id===id){data.content=content;}});});}updateComments(updatedComments);};// delete comment\nvar commentDelete=function commentDelete(id,type,parentComment){var updatedComments=_toConsumableArray(comments);var updatedReplies=[];if(type===\"comment\"){updatedComments=updatedComments.filter(function(data){return data.id!==id;});}else if(type===\"reply\"){comments.forEach(function(comment){if(comment.id===parentComment){updatedReplies=comment.replies.filter(function(data){return data.id!==id;});comment.replies=updatedReplies;}});}updateComments(updatedComments);};return/*#__PURE__*/_jsxs(\"main\",{className:\"App\",children:[comments.map(function(comment){return/*#__PURE__*/_jsx(Comment,{commentData:comment,updateScore:updateScore,updateReplies:updateReplies,editComment:editComment,commentDelete:commentDelete,setDeleteModalState:setDeleteModalState},comment.id);}),/*#__PURE__*/_jsx(AddComment,{buttonValue:\"send\",addComments:addComments})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Comment","AddComment","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","comments","updateComments","_useState3","_useState4","deleteModalState","setDeleteModalState","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","localStorage","getItem","JSON","parse","setItem","stringify","document","body","classList","add","remove","updateScore","score","id","type","updatedComments","_toConsumableArray","forEach","comment","replies","addComments","newComment","concat","updateReplies","editComment","content","commentDelete","parentComment","updatedReplies","filter","className","children","map","commentData","buttonValue"],"sources":["/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./Components/Styles/App.scss\";\nimport Comment from \"./Components/Comment\";\nimport AddComment from \"./Components/AddComment\";\n\nconst App = () => {\n  const [comments, updateComments] = useState([]);\n  const [deleteModalState, setDeleteModalState] = useState(false);\n\n  const getData = async () => {\n    const res = await fetch(\"./data/data.json\");\n    const data = await res.json();\n    updateComments(data.comments);\n  };\n\n  useEffect(() => {\n    localStorage.getItem(\"comments\") !== null\n      ? updateComments(JSON.parse(localStorage.getItem(\"comments\")))\n      : getData();\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"comments\", JSON.stringify(comments));\n    deleteModalState\n      ? document.body.classList.add(\"overflow--hidden\")\n      : document.body.classList.remove(\"overflow--hidden\");\n  }, [comments, deleteModalState]);\n\n  // update score\n  let updateScore = (score, id, type) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach((data) => {\n        if (data.id === id) {\n          data.score = score;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach((comment) => {\n        comment.replies.forEach((data) => {\n          if (data.id === id) {\n            data.score = score;\n          }\n        });\n      });\n    }\n    updateComments(updatedComments);\n  };\n\n  // add comments\n  let addComments = (newComment) => {\n    let updatedComments = [...comments, newComment];\n    updateComments(updatedComments);\n  };\n\n  // add replies\n  let updateReplies = (replies, id) => {\n    let updatedComments = [...comments];\n    updatedComments.forEach((data) => {\n      if (data.id === id) {\n        data.replies = [...replies];\n      }\n    });\n    updateComments(updatedComments);\n  };\n\n  // edit comment\n  let editComment = (content, id, type) => {\n    let updatedComments = [...comments];\n\n    if (type === \"comment\") {\n      updatedComments.forEach((data) => {\n        if (data.id === id) {\n          data.content = content;\n        }\n      });\n    } else if (type === \"reply\") {\n      updatedComments.forEach((comment) => {\n        comment.replies.forEach((data) => {\n          if (data.id === id) {\n            data.content = content;\n          }\n        });\n      });\n    }\n\n    updateComments(updatedComments);\n  };\n\n  // delete comment\n  let commentDelete = (id, type, parentComment) => {\n    let updatedComments = [...comments];\n    let updatedReplies = [];\n\n    if (type === \"comment\") {\n      updatedComments = updatedComments.filter((data) => data.id !== id);\n    } else if (type === \"reply\") {\n      comments.forEach((comment) => {\n        if (comment.id === parentComment) {\n          updatedReplies = comment.replies.filter((data) => data.id !== id);\n          comment.replies = updatedReplies;\n        }\n      });\n    }\n\n    updateComments(updatedComments);\n  };\n\n  return (\n    <main className=\"App\">\n      {comments.map((comment) => (\n        <Comment\n          key={comment.id}\n          commentData={comment}\n          updateScore={updateScore}\n          updateReplies={updateReplies}\n          editComment={editComment}\n          commentDelete={commentDelete}\n          setDeleteModalState={setDeleteModalState}\n        />\n      ))}\n      <AddComment buttonValue={\"send\"} addComments={addComments} />\n    </main>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}