{"ast":null,"code":"import _toConsumableArray from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"./Styles/Comment.scss\";import AddComment from\"./AddComment\";import ReplyContainer from\"./ReplyContainer\";import DeleteModal from\"./DeleteModal\";import CommentVotes from\"./CommentVotes\";import CommentHeader from\"./CommentHeader\";import CommentFooter from\"./CommentFooter\";import{commentPostedTime}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var commentData=_ref.commentData,updateScore=_ref.updateScore,updateReplies=_ref.updateReplies,editComment=_ref.editComment,commentDelete=_ref.commentDelete,setDeleteModalState=_ref.setDeleteModalState;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),replying=_useState2[0],setReplying=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),vote=_useState6[0],setVoted=_useState6[1];var _useState7=useState(commentData.score),_useState8=_slicedToArray(_useState7,2),score=_useState8[0],setScore=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),editing=_useState10[0],setEditing=_useState10[1];var _useState11=useState(commentData.content),_useState12=_slicedToArray(_useState11,2),content=_useState12[0],setContent=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),deleting=_useState14[0],setDeleting=_useState14[1];// get time from comment posted\nvar createdAt=new Date(commentData.createdAt);var today=new Date();var differenceInTime=today.getTime()-createdAt.getTime();useEffect(function(){setTime(commentPostedTime(differenceInTime));localStorage.setItem(\"voteState\",vote);},[differenceInTime,vote]);var addReply=function addReply(newReply){var replies=[].concat(_toConsumableArray(commentData.replies),[newReply]);updateReplies(replies,commentData.id);setReplying(false);};var updateComment=function updateComment(){editComment(content,commentData.id,\"comment\");setEditing(false);};var deleteComment=function deleteComment(id,type){var finalType=type!==undefined?type:\"comment\";var finalId=id!==undefined?id:commentData.id;commentDelete(finalId,finalType,commentData.id);setDeleting(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-container \".concat(commentData.replies[0]!==undefined?\"reply-container-gap\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(CommentVotes,{vote:vote,setVoted:setVoted,score:score,setScore:setScore,updateScore:updateScore,commentData:commentData}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment--body\",children:[/*#__PURE__*/_jsx(CommentHeader,{commentData:commentData,setReplying:setReplying,setDeleting:setDeleting,setDeleteModalState:setDeleteModalState,setEditing:setEditing,time:time}),!editing?/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:commentData.content}):/*#__PURE__*/_jsx(\"textarea\",{className:\"content-edit-box\",value:content,onChange:function onChange(e){setContent(e.target.value);}}),editing&&/*#__PURE__*/_jsx(\"button\",{className:\"update-btn\",onClick:updateComment,children:\"update\"})]}),/*#__PURE__*/_jsx(CommentFooter,{vote:vote,setVoted:setVoted,score:score,setScore:setScore,updateScore:updateScore,commentData:commentData,setReplying:setReplying,setDeleting:setDeleting,setDeleteModalState:setDeleteModalState,setEditing:setEditing}),\" \"]}),replying&&/*#__PURE__*/_jsx(AddComment,{buttonValue:\"reply\",addComments:addReply,replyingTo:commentData.username}),commentData.replies!==[]&&/*#__PURE__*/_jsx(ReplyContainer,{commentData:commentData.replies,updateScore:updateScore,commentPostedTime:commentPostedTime,addReply:addReply,editComment:editComment,deleteComment:deleteComment,setDeleteModalState:setDeleteModalState},commentData.replies.id),deleting&&/*#__PURE__*/_jsx(DeleteModal,{setDeleting:setDeleting,deleteComment:deleteComment,setDeleteModalState:setDeleteModalState})]});};export default Comment;","map":{"version":3,"names":["useEffect","useState","AddComment","ReplyContainer","DeleteModal","CommentVotes","CommentHeader","CommentFooter","commentPostedTime","jsx","_jsx","jsxs","_jsxs","Comment","_ref","commentData","updateScore","updateReplies","editComment","commentDelete","setDeleteModalState","_useState","_useState2","_slicedToArray","replying","setReplying","_useState3","_useState4","time","setTime","_useState5","_useState6","vote","setVoted","_useState7","score","_useState8","setScore","_useState9","_useState10","editing","setEditing","_useState11","content","_useState12","setContent","_useState13","_useState14","deleting","setDeleting","createdAt","Date","today","differenceInTime","getTime","localStorage","setItem","addReply","newReply","replies","concat","_toConsumableArray","id","updateComment","deleteComment","type","finalType","undefined","finalId","className","children","value","onChange","e","target","onClick","buttonValue","addComments","replyingTo","username"],"sources":["/Users/deepomchowdhury/Downloads/CommentsDemo/CommentDemo/src/Components/Comment.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nimport \"./Styles/Comment.scss\";\n\nimport AddComment from \"./AddComment\";\nimport ReplyContainer from \"./ReplyContainer\";\nimport DeleteModal from \"./DeleteModal\";\nimport CommentVotes from \"./CommentVotes\";\nimport CommentHeader from \"./CommentHeader\";\nimport CommentFooter from \"./CommentFooter\";\n\nimport { commentPostedTime } from \"../utils\";\n\nconst Comment = ({\n  commentData,\n  updateScore,\n  updateReplies,\n  editComment,\n  commentDelete,\n  setDeleteModalState,\n}) => {\n  const [replying, setReplying] = useState(false);\n  const [time, setTime] = useState(\"\");\n  const [vote, setVoted] = useState(false);\n  const [score, setScore] = useState(commentData.score);\n  const [editing, setEditing] = useState(false);\n  const [content, setContent] = useState(commentData.content);\n  const [deleting, setDeleting] = useState(false);\n\n  // get time from comment posted\n  const createdAt = new Date(commentData.createdAt);\n  const today = new Date();\n  const differenceInTime = today.getTime() - createdAt.getTime();\n\n  useEffect(() => {\n    setTime(commentPostedTime(differenceInTime));\n    localStorage.setItem(\"voteState\", vote);\n  }, [differenceInTime, vote]);\n\n  const addReply = (newReply) => {\n    const replies = [...commentData.replies, newReply];\n    updateReplies(replies, commentData.id);\n    setReplying(false);\n  };\n\n  const updateComment = () => {\n    editComment(content, commentData.id, \"comment\");\n    setEditing(false);\n  };\n\n  const deleteComment = (id, type) => {\n    const finalType = type !== undefined ? type : \"comment\";\n    const finalId = id !== undefined ? id : commentData.id;\n    commentDelete(finalId, finalType, commentData.id);\n    setDeleting(false);\n  };\n\n  return (\n    <div\n      className={`comment-container ${\n        commentData.replies[0] !== undefined ? \"reply-container-gap\" : \"\"\n      }`}\n    >\n      <div className=\"comment\">\n        <CommentVotes\n          vote={vote}\n          setVoted={setVoted}\n          score={score}\n          setScore={setScore}\n          updateScore={updateScore}\n          commentData={commentData}\n        />\n        <div className=\"comment--body\">\n          <CommentHeader\n            commentData={commentData}\n            setReplying={setReplying}\n            setDeleting={setDeleting}\n            setDeleteModalState={setDeleteModalState}\n            setEditing={setEditing}\n            time={time}\n          />\n          {!editing ? (\n            <div className=\"comment-content\">{commentData.content}</div>\n          ) : (\n            <textarea\n              className=\"content-edit-box\"\n              value={content}\n              onChange={(e) => {\n                setContent(e.target.value);\n              }}\n            />\n          )}\n          {editing && (\n            <button className=\"update-btn\" onClick={updateComment}>\n              update\n            </button>\n          )}\n        </div>\n        <CommentFooter\n          vote={vote}\n          setVoted={setVoted}\n          score={score}\n          setScore={setScore}\n          updateScore={updateScore}\n          commentData={commentData}\n          setReplying={setReplying}\n          setDeleting={setDeleting}\n          setDeleteModalState={setDeleteModalState}\n          setEditing={setEditing}\n        />{\" \"}\n      </div>\n\n      {replying && (\n        <AddComment\n          buttonValue={\"reply\"}\n          addComments={addReply}\n          replyingTo={commentData.username}\n        />\n      )}\n      {commentData.replies !== [] && (\n        <ReplyContainer\n          key={commentData.replies.id}\n          commentData={commentData.replies}\n          updateScore={updateScore}\n          commentPostedTime={commentPostedTime}\n          addReply={addReply}\n          editComment={editComment}\n          deleteComment={deleteComment}\n          setDeleteModalState={setDeleteModalState}\n        />\n      )}\n\n      {deleting && (\n        <DeleteModal\n          setDeleting={setDeleting}\n          deleteComment={deleteComment}\n          setDeleteModalState={setDeleteModalState}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n"],"mappings":"sSAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE3C,MAAO,uBAAuB,CAE9B,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAE3C,OAASC,iBAAiB,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7C,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAAC,IAAA,CAOP,IANJ,CAAAC,WAAW,CAAAD,IAAA,CAAXC,WAAW,CACXC,WAAW,CAAAF,IAAA,CAAXE,WAAW,CACXC,aAAa,CAAAH,IAAA,CAAbG,aAAa,CACbC,WAAW,CAAAJ,IAAA,CAAXI,WAAW,CACXC,aAAa,CAAAL,IAAA,CAAbK,aAAa,CACbC,mBAAmB,CAAAN,IAAA,CAAnBM,mBAAmB,CAEnB,IAAAC,SAAA,CAAgCpB,QAAQ,CAAC,KAAK,CAAC,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAxCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAwBzB,QAAQ,CAAC,EAAE,CAAC,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,IAAAG,UAAA,CAAyB7B,QAAQ,CAAC,KAAK,CAAC,CAAA8B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAjCE,IAAI,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACrB,IAAAG,UAAA,CAA0BjC,QAAQ,CAACc,WAAW,CAACoB,KAAK,CAAC,CAAAC,UAAA,CAAAb,cAAA,CAAAW,UAAA,IAA9CC,KAAK,CAAAC,UAAA,IAAEC,QAAQ,CAAAD,UAAA,IACtB,IAAAE,UAAA,CAA8BrC,QAAQ,CAAC,KAAK,CAAC,CAAAsC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAtCE,OAAO,CAAAD,WAAA,IAAEE,UAAU,CAAAF,WAAA,IAC1B,IAAAG,WAAA,CAA8BzC,QAAQ,CAACc,WAAW,CAAC4B,OAAO,CAAC,CAAAC,WAAA,CAAArB,cAAA,CAAAmB,WAAA,IAApDC,OAAO,CAAAC,WAAA,IAAEC,UAAU,CAAAD,WAAA,IAC1B,IAAAE,WAAA,CAAgC7C,QAAQ,CAAC,KAAK,CAAC,CAAA8C,WAAA,CAAAxB,cAAA,CAAAuB,WAAA,IAAxCE,QAAQ,CAAAD,WAAA,IAAEE,WAAW,CAAAF,WAAA,IAE5B;AACA,GAAM,CAAAG,SAAS,CAAG,GAAI,CAAAC,IAAI,CAACpC,WAAW,CAACmC,SAAS,CAAC,CACjD,GAAM,CAAAE,KAAK,CAAG,GAAI,CAAAD,IAAI,EAAE,CACxB,GAAM,CAAAE,gBAAgB,CAAGD,KAAK,CAACE,OAAO,EAAE,CAAGJ,SAAS,CAACI,OAAO,EAAE,CAE9DtD,SAAS,CAAC,UAAM,CACd6B,OAAO,CAACrB,iBAAiB,CAAC6C,gBAAgB,CAAC,CAAC,CAC5CE,YAAY,CAACC,OAAO,CAAC,WAAW,CAAExB,IAAI,CAAC,CACzC,CAAC,CAAE,CAACqB,gBAAgB,CAAErB,IAAI,CAAC,CAAC,CAE5B,GAAM,CAAAyB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,QAAQ,CAAK,CAC7B,GAAM,CAAAC,OAAO,IAAAC,MAAA,CAAAC,kBAAA,CAAO9C,WAAW,CAAC4C,OAAO,GAAED,QAAQ,EAAC,CAClDzC,aAAa,CAAC0C,OAAO,CAAE5C,WAAW,CAAC+C,EAAE,CAAC,CACtCrC,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAED,GAAM,CAAAsC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1B7C,WAAW,CAACyB,OAAO,CAAE5B,WAAW,CAAC+C,EAAE,CAAE,SAAS,CAAC,CAC/CrB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,GAAM,CAAAuB,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIF,EAAE,CAAEG,IAAI,CAAK,CAClC,GAAM,CAAAC,SAAS,CAAGD,IAAI,GAAKE,SAAS,CAAGF,IAAI,CAAG,SAAS,CACvD,GAAM,CAAAG,OAAO,CAAGN,EAAE,GAAKK,SAAS,CAAGL,EAAE,CAAG/C,WAAW,CAAC+C,EAAE,CACtD3C,aAAa,CAACiD,OAAO,CAAEF,SAAS,CAAEnD,WAAW,CAAC+C,EAAE,CAAC,CACjDb,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAED,mBACErC,KAAA,QACEyD,SAAS,sBAAAT,MAAA,CACP7C,WAAW,CAAC4C,OAAO,CAAC,CAAC,CAAC,GAAKQ,SAAS,CAAG,qBAAqB,CAAG,EAAE,CAChE,CAAAG,QAAA,eAEH1D,KAAA,QAAKyD,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB5D,IAAA,CAACL,YAAY,EACX2B,IAAI,CAAEA,IAAK,CACXC,QAAQ,CAAEA,QAAS,CACnBE,KAAK,CAAEA,KAAM,CACbE,QAAQ,CAAEA,QAAS,CACnBrB,WAAW,CAAEA,WAAY,CACzBD,WAAW,CAAEA,WAAY,EACzB,cACFH,KAAA,QAAKyD,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5B5D,IAAA,CAACJ,aAAa,EACZS,WAAW,CAAEA,WAAY,CACzBU,WAAW,CAAEA,WAAY,CACzBwB,WAAW,CAAEA,WAAY,CACzB7B,mBAAmB,CAAEA,mBAAoB,CACzCqB,UAAU,CAAEA,UAAW,CACvBb,IAAI,CAAEA,IAAK,EACX,CACD,CAACY,OAAO,cACP9B,IAAA,QAAK2D,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEvD,WAAW,CAAC4B,OAAO,EAAO,cAE5DjC,IAAA,aACE2D,SAAS,CAAC,kBAAkB,CAC5BE,KAAK,CAAE5B,OAAQ,CACf6B,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAK,CACf5B,UAAU,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAC5B,CAAE,EAEL,CACA/B,OAAO,eACN9B,IAAA,WAAQ2D,SAAS,CAAC,YAAY,CAACM,OAAO,CAAEZ,aAAc,CAAAO,QAAA,CAAC,QAEvD,EACD,GACG,cACN5D,IAAA,CAACH,aAAa,EACZyB,IAAI,CAAEA,IAAK,CACXC,QAAQ,CAAEA,QAAS,CACnBE,KAAK,CAAEA,KAAM,CACbE,QAAQ,CAAEA,QAAS,CACnBrB,WAAW,CAAEA,WAAY,CACzBD,WAAW,CAAEA,WAAY,CACzBU,WAAW,CAAEA,WAAY,CACzBwB,WAAW,CAAEA,WAAY,CACzB7B,mBAAmB,CAAEA,mBAAoB,CACzCqB,UAAU,CAAEA,UAAW,EACvB,CAAC,GAAG,GACF,CAELjB,QAAQ,eACPd,IAAA,CAACR,UAAU,EACT0E,WAAW,CAAE,OAAQ,CACrBC,WAAW,CAAEpB,QAAS,CACtBqB,UAAU,CAAE/D,WAAW,CAACgE,QAAS,EAEpC,CACAhE,WAAW,CAAC4C,OAAO,GAAK,EAAE,eACzBjD,IAAA,CAACP,cAAc,EAEbY,WAAW,CAAEA,WAAW,CAAC4C,OAAQ,CACjC3C,WAAW,CAAEA,WAAY,CACzBR,iBAAiB,CAAEA,iBAAkB,CACrCiD,QAAQ,CAAEA,QAAS,CACnBvC,WAAW,CAAEA,WAAY,CACzB8C,aAAa,CAAEA,aAAc,CAC7B5C,mBAAmB,CAAEA,mBAAoB,EAPpCL,WAAW,CAAC4C,OAAO,CAACG,EAAE,CAS9B,CAEAd,QAAQ,eACPtC,IAAA,CAACN,WAAW,EACV6C,WAAW,CAAEA,WAAY,CACzBe,aAAa,CAAEA,aAAc,CAC7B5C,mBAAmB,CAAEA,mBAAoB,EAE5C,GACG,CAEV,CAAC,CAED,cAAe,CAAAP,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}